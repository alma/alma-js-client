import t from"axios";var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function n(t,e,n){return t(n={path:e,exports:{},require:function(t,e){return function(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}()}},n.exports),n.exports}var r=function(t){return t&&t.Math==Math&&t},o=r("object"==typeof globalThis&&globalThis)||r("object"==typeof window&&window)||r("object"==typeof self&&self)||r("object"==typeof e&&e)||Function("return this")(),i=function(t){try{return!!t()}catch(t){return!0}},u=!i(function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]}),c=function(t){return"object"==typeof t?null!==t:"function"==typeof t},a=o.document,s=c(a)&&c(a.createElement),f=function(t){return s?a.createElement(t):{}},l=!u&&!i(function(){return 7!=Object.defineProperty(f("div"),"a",{get:function(){return 7}}).a}),p=function(t){if(!c(t))throw TypeError(String(t)+" is not an object");return t},h=function(t,e){if(!c(t))return t;var n,r;if(e&&"function"==typeof(n=t.toString)&&!c(r=n.call(t)))return r;if("function"==typeof(n=t.valueOf)&&!c(r=n.call(t)))return r;if(!e&&"function"==typeof(n=t.toString)&&!c(r=n.call(t)))return r;throw TypeError("Can't convert object to primitive value")},v=Object.defineProperty,d={f:u?v:function(t,e,n){if(p(t),e=h(e,!0),p(n),l)try{return v(t,e,n)}catch(t){}if("get"in n||"set"in n)throw TypeError("Accessors not supported");return"value"in n&&(t[e]=n.value),t}},y=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}},g=u?function(t,e,n){return d.f(t,e,y(1,n))}:function(t,e,n){return t[e]=n,t},m=function(t,e){try{g(o,t,e)}catch(n){o[t]=e}return e},w=o["__core-js_shared__"]||m("__core-js_shared__",{}),b=n(function(t){(t.exports=function(t,e){return w[t]||(w[t]=void 0!==e?e:{})})("versions",[]).push({version:"3.6.5",mode:"global",copyright:"Â© 2020 Denis Pushkarev (zloirock.ru)"})}),S={}.hasOwnProperty,E=function(t,e){return S.call(t,e)},j=0,x=Math.random(),O=function(t){return"Symbol("+String(void 0===t?"":t)+")_"+(++j+x).toString(36)},A=!!Object.getOwnPropertySymbols&&!i(function(){return!String(Symbol())}),L=A&&!Symbol.sham&&"symbol"==typeof Symbol.iterator,T=b("wks"),P=o.Symbol,_=L?P:P&&P.withoutSetter||O,k=function(t){return E(T,t)||(T[t]=A&&E(P,t)?P[t]:_("Symbol."+t)),T[t]},I={};I[k("toStringTag")]="z";var R="[object z]"===String(I),M=Function.toString;"function"!=typeof w.inspectSource&&(w.inspectSource=function(t){return M.call(t)});var C,F,D,N=w.inspectSource,G=o.WeakMap,W="function"==typeof G&&/native code/.test(N(G)),q=b("keys"),z=function(t){return q[t]||(q[t]=O(t))},V={};if(W){var U=new(0,o.WeakMap),K=U.get,B=U.has,H=U.set;C=function(t,e){return H.call(U,t,e),e},F=function(t){return K.call(U,t)||{}},D=function(t){return B.call(U,t)}}else{var Y=z("state");V[Y]=!0,C=function(t,e){return g(t,Y,e),e},F=function(t){return E(t,Y)?t[Y]:{}},D=function(t){return E(t,Y)}}var Q={set:C,get:F,has:D,enforce:function(t){return D(t)?F(t):C(t,{})},getterFor:function(t){return function(e){var n;if(!c(e)||(n=F(e)).type!==t)throw TypeError("Incompatible receiver, "+t+" required");return n}}},J=n(function(t){var e=Q.get,n=Q.enforce,r=String(String).split("String");(t.exports=function(t,e,i,u){var c=!!u&&!!u.unsafe,a=!!u&&!!u.enumerable,s=!!u&&!!u.noTargetGet;"function"==typeof i&&("string"!=typeof e||E(i,"name")||g(i,"name",e),n(i).source=r.join("string"==typeof e?e:"")),t!==o?(c?!s&&t[e]&&(a=!0):delete t[e],a?t[e]=i:g(t,e,i)):a?t[e]=i:m(e,i)})(Function.prototype,"toString",function(){return"function"==typeof this&&e(this).source||N(this)})}),X={}.toString,Z=function(t){return X.call(t).slice(8,-1)},$=k("toStringTag"),tt="Arguments"==Z(function(){return arguments}()),et=R?Z:function(t){var e,n,r;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(n=function(t,e){try{return t[e]}catch(t){}}(e=Object(t),$))?n:tt?Z(e):"Object"==(r=Z(e))&&"function"==typeof e.callee?"Arguments":r};R||J(Object.prototype,"toString",R?{}.toString:function(){return"[object "+et(this)+"]"},{unsafe:!0});var nt,rt,ot,it=Math.ceil,ut=Math.floor,ct=function(t){return isNaN(t=+t)?0:(t>0?ut:it)(t)},at=function(t){if(null==t)throw TypeError("Can't call method on "+t);return t},st=function(t){return function(e,n){var r,o,i=String(at(e)),u=ct(n),c=i.length;return u<0||u>=c?t?"":void 0:(r=i.charCodeAt(u))<55296||r>56319||u+1===c||(o=i.charCodeAt(u+1))<56320||o>57343?t?i.charAt(u):r:t?i.slice(u,u+2):o-56320+(r-55296<<10)+65536}},ft={codeAt:st(!1),charAt:st(!0)},lt={}.propertyIsEnumerable,pt=Object.getOwnPropertyDescriptor,ht={f:pt&&!lt.call({1:2},1)?function(t){var e=pt(this,t);return!!e&&e.enumerable}:lt},vt="".split,dt=i(function(){return!Object("z").propertyIsEnumerable(0)})?function(t){return"String"==Z(t)?vt.call(t,""):Object(t)}:Object,yt=function(t){return dt(at(t))},gt=Object.getOwnPropertyDescriptor,mt={f:u?gt:function(t,e){if(t=yt(t),e=h(e,!0),l)try{return gt(t,e)}catch(t){}if(E(t,e))return y(!ht.f.call(t,e),t[e])}},wt=o,bt=function(t){return"function"==typeof t?t:void 0},St=function(t,e){return arguments.length<2?bt(wt[t])||bt(o[t]):wt[t]&&wt[t][e]||o[t]&&o[t][e]},Et=Math.min,jt=function(t){return t>0?Et(ct(t),9007199254740991):0},xt=Math.max,Ot=Math.min,At=function(t){return function(e,n,r){var o,i=yt(e),u=jt(i.length),c=function(t,e){var n=ct(t);return n<0?xt(n+e,0):Ot(n,e)}(r,u);if(t&&n!=n){for(;u>c;)if((o=i[c++])!=o)return!0}else for(;u>c;c++)if((t||c in i)&&i[c]===n)return t||c||0;return!t&&-1}},Lt=(At(!0),At(!1)),Tt=function(t,e){var n,r=yt(t),o=0,i=[];for(n in r)!E(V,n)&&E(r,n)&&i.push(n);for(;e.length>o;)E(r,n=e[o++])&&(~Lt(i,n)||i.push(n));return i},Pt=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],_t=Pt.concat("length","prototype"),kt={f:Object.getOwnPropertyNames||function(t){return Tt(t,_t)}},It={f:Object.getOwnPropertySymbols},Rt=St("Reflect","ownKeys")||function(t){var e=kt.f(p(t)),n=It.f;return n?e.concat(n(t)):e},Mt=function(t,e){for(var n=Rt(e),r=d.f,o=mt.f,i=0;i<n.length;i++){var u=n[i];E(t,u)||r(t,u,o(e,u))}},Ct=/#|\.prototype\./,Ft=function(t,e){var n=Nt[Dt(t)];return n==Wt||n!=Gt&&("function"==typeof e?i(e):!!e)},Dt=Ft.normalize=function(t){return String(t).replace(Ct,".").toLowerCase()},Nt=Ft.data={},Gt=Ft.NATIVE="N",Wt=Ft.POLYFILL="P",qt=Ft,zt=mt.f,Vt=function(t,e){var n,r,i,u,c,a=t.target,s=t.global,f=t.stat;if(n=s?o:f?o[a]||m(a,{}):(o[a]||{}).prototype)for(r in e){if(u=e[r],i=t.noTargetGet?(c=zt(n,r))&&c.value:n[r],!qt(s?r:a+(f?".":"#")+r,t.forced)&&void 0!==i){if(typeof u==typeof i)continue;Mt(u,i)}(t.sham||i&&i.sham)&&g(u,"sham",!0),J(n,r,u,t)}},Ut=function(t){return Object(at(t))},Kt=!i(function(){function t(){}return t.prototype.constructor=null,Object.getPrototypeOf(new t)!==t.prototype}),Bt=z("IE_PROTO"),Ht=Object.prototype,Yt=Kt?Object.getPrototypeOf:function(t){return t=Ut(t),E(t,Bt)?t[Bt]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?Ht:null},Qt=k("iterator"),Jt=!1;[].keys&&("next"in(ot=[].keys())?(rt=Yt(Yt(ot)))!==Object.prototype&&(nt=rt):Jt=!0),null==nt&&(nt={}),E(nt,Qt)||g(nt,Qt,function(){return this});var Xt,Zt={IteratorPrototype:nt,BUGGY_SAFARI_ITERATORS:Jt},$t=Object.keys||function(t){return Tt(t,Pt)},te=u?Object.defineProperties:function(t,e){p(t);for(var n,r=$t(e),o=r.length,i=0;o>i;)d.f(t,n=r[i++],e[n]);return t},ee=St("document","documentElement"),ne=z("IE_PROTO"),re=function(){},oe=function(t){return"<script>"+t+"<\/script>"},ie=function(){try{Xt=document.domain&&new ActiveXObject("htmlfile")}catch(t){}var t,e;ie=Xt?function(t){t.write(oe("")),t.close();var e=t.parentWindow.Object;return t=null,e}(Xt):((e=f("iframe")).style.display="none",ee.appendChild(e),e.src=String("javascript:"),(t=e.contentWindow.document).open(),t.write(oe("document.F=Object")),t.close(),t.F);for(var n=Pt.length;n--;)delete ie.prototype[Pt[n]];return ie()};V[ne]=!0;var ue=Object.create||function(t,e){var n;return null!==t?(re.prototype=p(t),n=new re,re.prototype=null,n[ne]=t):n=ie(),void 0===e?n:te(n,e)},ce=d.f,ae=k("toStringTag"),se=function(t,e,n){t&&!E(t=n?t:t.prototype,ae)&&ce(t,ae,{configurable:!0,value:e})},fe={},le=Zt.IteratorPrototype,pe=function(){return this},he=Object.setPrototypeOf||("__proto__"in{}?function(){var t,e=!1,n={};try{(t=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set).call(n,[]),e=n instanceof Array}catch(t){}return function(n,r){return p(n),function(t){if(!c(t)&&null!==t)throw TypeError("Can't set "+String(t)+" as a prototype")}(r),e?t.call(n,r):n.__proto__=r,n}}():void 0),ve=Zt.IteratorPrototype,de=Zt.BUGGY_SAFARI_ITERATORS,ye=k("iterator"),ge=function(){return this},me=function(t,e,n,r,o,i,u){!function(t,e,n){var r=e+" Iterator";t.prototype=ue(le,{next:y(1,n)}),se(t,r,!1),fe[r]=pe}(n,e,r);var c,a,s,f=function(t){if(t===o&&d)return d;if(!de&&t in h)return h[t];switch(t){case"keys":case"values":case"entries":return function(){return new n(this,t)}}return function(){return new n(this)}},l=e+" Iterator",p=!1,h=t.prototype,v=h[ye]||h["@@iterator"]||o&&h[o],d=!de&&v||f(o),m="Array"==e&&h.entries||v;if(m&&(c=Yt(m.call(new t)),ve!==Object.prototype&&c.next&&(Yt(c)!==ve&&(he?he(c,ve):"function"!=typeof c[ye]&&g(c,ye,ge)),se(c,l,!0))),"values"==o&&v&&"values"!==v.name&&(p=!0,d=function(){return v.call(this)}),h[ye]!==d&&g(h,ye,d),fe[e]=d,o)if(a={values:f("values"),keys:i?d:f("keys"),entries:f("entries")},u)for(s in a)(de||p||!(s in h))&&J(h,s,a[s]);else Vt({target:e,proto:!0,forced:de||p},a);return a},we=ft.charAt,be=Q.set,Se=Q.getterFor("String Iterator");me(String,"String",function(t){be(this,{type:"String Iterator",string:String(t),index:0})},function(){var t,e=Se(this),n=e.string,r=e.index;return r>=n.length?{value:void 0,done:!0}:(t=we(n,r),e.index+=t.length,{value:t,done:!1})});var Ee={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0},je=k("unscopables"),xe=Array.prototype;null==xe[je]&&d.f(xe,je,{configurable:!0,value:ue(null)});var Oe=function(t){xe[je][t]=!0},Ae=Q.set,Le=Q.getterFor("Array Iterator"),Te=me(Array,"Array",function(t,e){Ae(this,{type:"Array Iterator",target:yt(t),index:0,kind:e})},function(){var t=Le(this),e=t.target,n=t.kind,r=t.index++;return!e||r>=e.length?(t.target=void 0,{value:void 0,done:!0}):"keys"==n?{value:r,done:!1}:"values"==n?{value:e[r],done:!1}:{value:[r,e[r]],done:!1}},"values");fe.Arguments=fe.Array,Oe("keys"),Oe("values"),Oe("entries");var Pe=k("iterator"),_e=k("toStringTag"),ke=Te.values;for(var Ie in Ee){var Re=o[Ie],Me=Re&&Re.prototype;if(Me){if(Me[Pe]!==ke)try{g(Me,Pe,ke)}catch(t){Me[Pe]=ke}if(Me[_e]||g(Me,_e,Ie),Ee[Ie])for(var Ce in Te)if(Me[Ce]!==Te[Ce])try{g(Me,Ce,Te[Ce])}catch(t){Me[Ce]=Te[Ce]}}}var Fe=o.Promise,De=function(t,e,n){for(var r in e)J(t,r,e[r],n);return t},Ne=k("species"),Ge=function(t){var e=St(t);u&&e&&!e[Ne]&&(0,d.f)(e,Ne,{configurable:!0,get:function(){return this}})},We=function(t){if("function"!=typeof t)throw TypeError(String(t)+" is not a function");return t},qe=function(t,e,n){if(!(t instanceof e))throw TypeError("Incorrect "+(n?n+" ":"")+"invocation");return t},ze=k("iterator"),Ve=Array.prototype,Ue=function(t,e,n){if(We(t),void 0===e)return t;switch(n){case 0:return function(){return t.call(e)};case 1:return function(n){return t.call(e,n)};case 2:return function(n,r){return t.call(e,n,r)};case 3:return function(n,r,o){return t.call(e,n,r,o)}}return function(){return t.apply(e,arguments)}},Ke=k("iterator"),Be=function(t,e,n,r){try{return r?e(p(n)[0],n[1]):e(n)}catch(e){var o=t.return;throw void 0!==o&&p(o.call(t)),e}},He=n(function(t){var e=function(t,e){this.stopped=t,this.result=e};(t.exports=function(t,n,r,o,i){var u,c,a,s,f,l,h,v,d=Ue(n,r,o?2:1);if(i)u=t;else{if("function"!=typeof(c=function(t){if(null!=t)return t[Ke]||t["@@iterator"]||fe[et(t)]}(t)))throw TypeError("Target is not iterable");if(void 0!==(v=c)&&(fe.Array===v||Ve[ze]===v)){for(a=0,s=jt(t.length);s>a;a++)if((f=o?d(p(h=t[a])[0],h[1]):d(t[a]))&&f instanceof e)return f;return new e(!1)}u=c.call(t)}for(l=u.next;!(h=l.call(u)).done;)if("object"==typeof(f=Be(u,d,h.value,o))&&f&&f instanceof e)return f;return new e(!1)}).stop=function(t){return new e(!0,t)}}),Ye=k("iterator"),Qe=!1;try{var Je=0,Xe={next:function(){return{done:!!Je++}},return:function(){Qe=!0}};Xe[Ye]=function(){return this},Array.from(Xe,function(){throw 2})}catch(t){}var Ze,$e,tn,en=function(t,e){if(!e&&!Qe)return!1;var n=!1;try{var r={};r[Ye]=function(){return{next:function(){return{done:n=!0}}}},t(r)}catch(t){}return n},nn=k("species"),rn=function(t,e){var n,r=p(t).constructor;return void 0===r||null==(n=p(r)[nn])?e:We(n)},on=St("navigator","userAgent")||"",un=/(iphone|ipod|ipad).*applewebkit/i.test(on),cn=o.location,an=o.setImmediate,sn=o.clearImmediate,fn=o.process,ln=o.MessageChannel,pn=o.Dispatch,hn=0,vn={},dn=function(t){if(vn.hasOwnProperty(t)){var e=vn[t];delete vn[t],e()}},yn=function(t){return function(){dn(t)}},gn=function(t){dn(t.data)},mn=function(t){o.postMessage(t+"",cn.protocol+"//"+cn.host)};an&&sn||(an=function(t){for(var e=[],n=1;arguments.length>n;)e.push(arguments[n++]);return vn[++hn]=function(){("function"==typeof t?t:Function(t)).apply(void 0,e)},Ze(hn),hn},sn=function(t){delete vn[t]},"process"==Z(fn)?Ze=function(t){fn.nextTick(yn(t))}:pn&&pn.now?Ze=function(t){pn.now(yn(t))}:ln&&!un?(tn=($e=new ln).port2,$e.port1.onmessage=gn,Ze=Ue(tn.postMessage,tn,1)):!o.addEventListener||"function"!=typeof postMessage||o.importScripts||i(mn)||"file:"===cn.protocol?Ze="onreadystatechange"in f("script")?function(t){ee.appendChild(f("script")).onreadystatechange=function(){ee.removeChild(this),dn(t)}}:function(t){setTimeout(yn(t),0)}:(Ze=mn,o.addEventListener("message",gn,!1)));var wn,bn,Sn,En,jn,xn,On,An,Ln={set:an,clear:sn},Tn=mt.f,Pn=Ln.set,_n=o.MutationObserver||o.WebKitMutationObserver,kn=o.process,In=o.Promise,Rn="process"==Z(kn),Mn=Tn(o,"queueMicrotask"),Cn=Mn&&Mn.value;Cn||(wn=function(){var t,e;for(Rn&&(t=kn.domain)&&t.exit();bn;){e=bn.fn,bn=bn.next;try{e()}catch(t){throw bn?En():Sn=void 0,t}}Sn=void 0,t&&t.enter()},Rn?En=function(){kn.nextTick(wn)}:_n&&!un?(jn=!0,xn=document.createTextNode(""),new _n(wn).observe(xn,{characterData:!0}),En=function(){xn.data=jn=!jn}):In&&In.resolve?(On=In.resolve(void 0),An=On.then,En=function(){An.call(On,wn)}):En=function(){Pn.call(o,wn)});var Fn,Dn,Nn=Cn||function(t){var e={fn:t,next:void 0};Sn&&(Sn.next=e),bn||(bn=e,En()),Sn=e},Gn=function(t){var e,n;this.promise=new t(function(t,r){if(void 0!==e||void 0!==n)throw TypeError("Bad Promise constructor");e=t,n=r}),this.resolve=We(e),this.reject=We(n)},Wn={f:function(t){return new Gn(t)}},qn=function(t,e){if(p(t),c(e)&&e.constructor===t)return e;var n=Wn.f(t);return(0,n.resolve)(e),n.promise},zn=function(t){try{return{error:!1,value:t()}}catch(t){return{error:!0,value:t}}},Vn=o.process,Un=Vn&&Vn.versions,Kn=Un&&Un.v8;Kn?Dn=(Fn=Kn.split("."))[0]+Fn[1]:on&&(!(Fn=on.match(/Edge\/(\d+)/))||Fn[1]>=74)&&(Fn=on.match(/Chrome\/(\d+)/))&&(Dn=Fn[1]);var Bn,Hn,Yn,Qn,Jn=Dn&&+Dn,Xn=Ln.set,Zn=k("species"),$n="Promise",tr=Q.get,er=Q.set,nr=Q.getterFor($n),rr=Fe,or=o.TypeError,ir=o.document,ur=o.process,cr=St("fetch"),ar=Wn.f,sr=ar,fr="process"==Z(ur),lr=!!(ir&&ir.createEvent&&o.dispatchEvent),pr=qt($n,function(){if(N(rr)===String(rr)){if(66===Jn)return!0;if(!fr&&"function"!=typeof PromiseRejectionEvent)return!0}if(Jn>=51&&/native code/.test(rr))return!1;var t=rr.resolve(1),e=function(t){t(function(){},function(){})};return(t.constructor={})[Zn]=e,!(t.then(function(){})instanceof e)}),hr=pr||!en(function(t){rr.all(t).catch(function(){})}),vr=function(t){var e;return!(!c(t)||"function"!=typeof(e=t.then))&&e},dr=function(t,e,n){if(!e.notified){e.notified=!0;var r=e.reactions;Nn(function(){for(var o=e.value,i=1==e.state,u=0;r.length>u;){var c,a,s,f=r[u++],l=i?f.ok:f.fail,p=f.resolve,h=f.reject,v=f.domain;try{l?(i||(2===e.rejection&&wr(t,e),e.rejection=1),!0===l?c=o:(v&&v.enter(),c=l(o),v&&(v.exit(),s=!0)),c===f.promise?h(or("Promise-chain cycle")):(a=vr(c))?a.call(c,p,h):p(c)):h(o)}catch(t){v&&!s&&v.exit(),h(t)}}e.reactions=[],e.notified=!1,n&&!e.rejection&&gr(t,e)})}},yr=function(t,e,n){var r,i;lr?((r=ir.createEvent("Event")).promise=e,r.reason=n,r.initEvent(t,!1,!0),o.dispatchEvent(r)):r={promise:e,reason:n},(i=o["on"+t])?i(r):"unhandledrejection"===t&&function(t,e){var n=o.console;n&&n.error&&(1===arguments.length?n.error(t):n.error(t,e))}("Unhandled promise rejection",n)},gr=function(t,e){Xn.call(o,function(){var n,r=e.value;if(mr(e)&&(n=zn(function(){fr?ur.emit("unhandledRejection",r,t):yr("unhandledrejection",t,r)}),e.rejection=fr||mr(e)?2:1,n.error))throw n.value})},mr=function(t){return 1!==t.rejection&&!t.parent},wr=function(t,e){Xn.call(o,function(){fr?ur.emit("rejectionHandled",t):yr("rejectionhandled",t,e.value)})},br=function(t,e,n,r){return function(o){t(e,n,o,r)}},Sr=function(t,e,n,r){e.done||(e.done=!0,r&&(e=r),e.value=n,e.state=2,dr(t,e,!0))},Er=function(t,e,n,r){if(!e.done){e.done=!0,r&&(e=r);try{if(t===n)throw or("Promise can't be resolved itself");var o=vr(n);o?Nn(function(){var r={done:!1};try{o.call(n,br(Er,t,r,e),br(Sr,t,r,e))}catch(n){Sr(t,r,n,e)}}):(e.value=n,e.state=1,dr(t,e,!1))}catch(n){Sr(t,{done:!1},n,e)}}};pr&&(rr=function(t){qe(this,rr,$n),We(t),Bn.call(this);var e=tr(this);try{t(br(Er,this,e),br(Sr,this,e))}catch(t){Sr(this,e,t)}},(Bn=function(t){er(this,{type:$n,done:!1,notified:!1,parent:!1,reactions:[],rejection:!1,state:0,value:void 0})}).prototype=De(rr.prototype,{then:function(t,e){var n=nr(this),r=ar(rn(this,rr));return r.ok="function"!=typeof t||t,r.fail="function"==typeof e&&e,r.domain=fr?ur.domain:void 0,n.parent=!0,n.reactions.push(r),0!=n.state&&dr(this,n,!1),r.promise},catch:function(t){return this.then(void 0,t)}}),Hn=function(){var t=new Bn,e=tr(t);this.promise=t,this.resolve=br(Er,t,e),this.reject=br(Sr,t,e)},Wn.f=ar=function(t){return t===rr||t===Yn?new Hn(t):sr(t)},"function"==typeof Fe&&(Qn=Fe.prototype.then,J(Fe.prototype,"then",function(t,e){var n=this;return new rr(function(t,e){Qn.call(n,t,e)}).then(t,e)},{unsafe:!0}),"function"==typeof cr&&Vt({global:!0,enumerable:!0,forced:!0},{fetch:function(t){return qn(rr,cr.apply(o,arguments))}}))),Vt({global:!0,wrap:!0,forced:pr},{Promise:rr}),se(rr,$n,!1),Ge($n),Yn=St($n),Vt({target:$n,stat:!0,forced:pr},{reject:function(t){var e=ar(this);return e.reject.call(void 0,t),e.promise}}),Vt({target:$n,stat:!0,forced:pr},{resolve:function(t){return qn(this,t)}}),Vt({target:$n,stat:!0,forced:hr},{all:function(t){var e=this,n=ar(e),r=n.resolve,o=n.reject,i=zn(function(){var n=We(e.resolve),i=[],u=0,c=1;He(t,function(t){var a=u++,s=!1;i.push(void 0),c++,n.call(e,t).then(function(t){s||(s=!0,i[a]=t,--c||r(i))},o)}),--c||r(i)});return i.error&&o(i.value),n.promise},race:function(t){var e=this,n=ar(e),r=n.reject,o=zn(function(){var o=We(e.resolve);He(t,function(t){o.call(e,t).then(n.resolve,r)})});return o.error&&r(o.value),n.promise}}),Vt({target:"Promise",stat:!0},{allSettled:function(t){var e=this,n=Wn.f(e),r=n.resolve,o=n.reject,i=zn(function(){var n=We(e.resolve),o=[],i=0,u=1;He(t,function(t){var c=i++,a=!1;o.push(void 0),u++,n.call(e,t).then(function(t){a||(a=!0,o[c]={status:"fulfilled",value:t},--u||r(o))},function(t){a||(a=!0,o[c]={status:"rejected",reason:t},--u||r(o))})}),--u||r(o)});return i.error&&o(i.value),n.promise}});var jr=!!Fe&&i(function(){Fe.prototype.finally.call({then:function(){}},function(){})});Vt({target:"Promise",proto:!0,real:!0,forced:jr},{finally:function(t){var e=rn(this,St("Promise")),n="function"==typeof t;return this.then(n?function(n){return qn(e,t()).then(function(){return n})}:t,n?function(n){return qn(e,t()).then(function(){throw n})}:t)}}),"function"!=typeof Fe||Fe.prototype.finally||J(Fe.prototype,"finally",St("Promise").prototype.finally);var xr=i(function(){$t(1)});Vt({target:"Object",stat:!0,forced:xr},{keys:function(t){return $t(Ut(t))}});var Or=function(t,e){var n=[][t];return!!n&&i(function(){n.call(null,e||function(){throw 1},1)})},Ar=[].join,Lr=dt!=Object,Tr=Or("join",",");Vt({target:"Array",proto:!0,forced:Lr||!Tr},{join:function(t){return Ar.call(yt(this),void 0===t?",":t)}});var Pr=Function.call,_r=function(t,e,n){return Ue(Pr,o[t].prototype[e],n)},kr=(_r("Array","join"),Array.isArray||function(t){return"Array"==Z(t)}),Ir=k("species"),Rr=function(t,e){var n;return kr(t)&&("function"!=typeof(n=t.constructor)||n!==Array&&!kr(n.prototype)?c(n)&&null===(n=n[Ir])&&(n=void 0):n=void 0),new(void 0===n?Array:n)(0===e?0:e)},Mr=[].push,Cr=function(t){var e=1==t,n=2==t,r=3==t,o=4==t,i=6==t,u=5==t||i;return function(c,a,s,f){for(var l,p,h=Ut(c),v=dt(h),d=Ue(a,s,3),y=jt(v.length),g=0,m=f||Rr,w=e?m(c,y):n?m(c,0):void 0;y>g;g++)if((u||g in v)&&(p=d(l=v[g],g,h),t))if(e)w[g]=p;else if(p)switch(t){case 3:return!0;case 5:return l;case 6:return g;case 2:Mr.call(w,l)}else if(o)return!1;return i?-1:r||o?o:w}},Fr={forEach:Cr(0),map:Cr(1),filter:Cr(2),some:Cr(3),every:Cr(4),find:Cr(5),findIndex:Cr(6)},Dr=Object.defineProperty,Nr={},Gr=function(t){throw t},Wr=Fr.forEach,qr=Or("forEach"),zr=function(t,e){if(E(Nr,"forEach"))return Nr.forEach;e||(e={});var n=[].forEach,r=!!E(e,"ACCESSORS")&&e.ACCESSORS,o=E(e,0)?e[0]:Gr,c=E(e,1)?e[1]:void 0;return Nr.forEach=!!n&&!i(function(){if(r&&!u)return!0;var t={length:-1};r?Dr(t,1,{enumerable:!0,get:Gr}):t[1]=1,n.call(t,o,c)})}(),Vr=qr&&zr?[].forEach:function(t){return Wr(this,t,arguments.length>1?arguments[1]:void 0)};Vt({target:"Array",proto:!0,forced:[].forEach!=Vr},{forEach:Vr}),_r("Array","forEach");var Ur,Kr=!i(function(){return Object.isExtensible(Object.preventExtensions({}))}),Br=n(function(t){var e=d.f,n=O("meta"),r=0,o=Object.isExtensible||function(){return!0},i=function(t){e(t,n,{value:{objectID:"O"+ ++r,weakData:{}}})},u=t.exports={REQUIRED:!1,fastKey:function(t,e){if(!c(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!E(t,n)){if(!o(t))return"F";if(!e)return"E";i(t)}return t[n].objectID},getWeakData:function(t,e){if(!E(t,n)){if(!o(t))return!0;if(!e)return!1;i(t)}return t[n].weakData},onFreeze:function(t){return Kr&&u.REQUIRED&&o(t)&&!E(t,n)&&i(t),t}};V[n]=!0}),Hr=d.f,Yr=Br.fastKey,Qr=Q.set,Jr=Q.getterFor,Xr=(function(t,e,n){var r=-1!=="Map".indexOf("Map"),u=-1!=="Map".indexOf("Weak"),a=r?"set":"add",s=o.Map,f=s&&s.prototype,l=s,p={},h=function(t){var e=f[t];J(f,t,"add"==t?function(t){return e.call(this,0===t?0:t),this}:"delete"==t?function(t){return!(u&&!c(t))&&e.call(this,0===t?0:t)}:"get"==t?function(t){return u&&!c(t)?void 0:e.call(this,0===t?0:t)}:"has"==t?function(t){return!(u&&!c(t))&&e.call(this,0===t?0:t)}:function(t,n){return e.call(this,0===t?0:t,n),this})};if(qt("Map","function"!=typeof s||!(u||f.forEach&&!i(function(){(new s).entries().next()}))))l=n.getConstructor(e,"Map",r,a),Br.REQUIRED=!0;else if(qt("Map",!0)){var v=new l,d=v[a](u?{}:-0,1)!=v,y=i(function(){v.has(1)}),g=en(function(t){new s(t)}),m=!u&&i(function(){for(var t=new s,e=5;e--;)t[a](e,e);return!t.has(-0)});g||((l=e(function(t,e){qe(t,l,"Map");var n=function(t,e,n){var r,o;return he&&"function"==typeof(r=e.constructor)&&r!==n&&c(o=r.prototype)&&o!==n.prototype&&he(t,o),t}(new s,t,l);return null!=e&&He(e,n[a],n,r),n})).prototype=f,f.constructor=l),(y||m)&&(h("delete"),h("has"),r&&h("get")),(m||d)&&h(a),u&&f.clear&&delete f.clear}p.Map=l,Vt({global:!0,forced:l!=s},p),se(l,"Map"),u||n.setStrong(l,"Map",r)}(0,function(t){return function(){return t(this,arguments.length?arguments[0]:void 0)}},{getConstructor:function(t,e,n,r){var o=t(function(t,i){qe(t,o,e),Qr(t,{type:e,index:ue(null),first:void 0,last:void 0,size:0}),u||(t.size=0),null!=i&&He(i,t[r],t,n)}),i=Jr(e),c=function(t,e,n){var r,o,c=i(t),s=a(t,e);return s?s.value=n:(c.last=s={index:o=Yr(e,!0),key:e,value:n,previous:r=c.last,next:void 0,removed:!1},c.first||(c.first=s),r&&(r.next=s),u?c.size++:t.size++,"F"!==o&&(c.index[o]=s)),t},a=function(t,e){var n,r=i(t),o=Yr(e);if("F"!==o)return r.index[o];for(n=r.first;n;n=n.next)if(n.key==e)return n};return De(o.prototype,{clear:function(){for(var t=i(this),e=t.index,n=t.first;n;)n.removed=!0,n.previous&&(n.previous=n.previous.next=void 0),delete e[n.index],n=n.next;t.first=t.last=void 0,u?t.size=0:this.size=0},delete:function(t){var e=i(this),n=a(this,t);if(n){var r=n.next,o=n.previous;delete e.index[n.index],n.removed=!0,o&&(o.next=r),r&&(r.previous=o),e.first==n&&(e.first=r),e.last==n&&(e.last=o),u?e.size--:this.size--}return!!n},forEach:function(t){for(var e,n=i(this),r=Ue(t,arguments.length>1?arguments[1]:void 0,3);e=e?e.next:n.first;)for(r(e.value,e.key,this);e&&e.removed;)e=e.previous},has:function(t){return!!a(this,t)}}),De(o.prototype,n?{get:function(t){var e=a(this,t);return e&&e.value},set:function(t,e){return c(this,0===t?0:t,e)}}:{add:function(t){return c(this,t=0===t?0:t,t)}}),u&&Hr(o.prototype,"size",{get:function(){return i(this).size}}),o},setStrong:function(t,e,n){var r=e+" Iterator",o=Jr(e),i=Jr(r);me(t,e,function(t,e){Qr(this,{type:r,target:t,state:o(t),kind:e,last:void 0})},function(){for(var t=i(this),e=t.kind,n=t.last;n&&n.removed;)n=n.previous;return t.target&&(t.last=n=n?n.next:t.state.first)?"keys"==e?{value:n.key,done:!1}:"values"==e?{value:n.value,done:!1}:{value:[n.key,n.value],done:!1}:(t.target=void 0,{value:void 0,done:!0})},n?"entries":"values",!n,!0),Ge(e)}}),k("match")),Zr=function(t){if(function(t){var e;return c(t)&&(void 0!==(e=t[Xr])?!!e:"RegExp"==Z(t))}(t))throw TypeError("The method doesn't accept regular expressions");return t},$r=k("match"),to=function(t){var e=/./;try{"/./"[t](e)}catch(n){try{return e[$r]=!1,"/./"[t](e)}catch(t){}}return!1},eo=mt.f,no="".startsWith,ro=Math.min,oo=to("startsWith"),io=!(oo||(Ur=eo(String.prototype,"startsWith"),!Ur||Ur.writable));Vt({target:"String",proto:!0,forced:!io&&!oo},{startsWith:function(t){var e=String(at(this));Zr(t);var n=jt(ro(arguments.length>1?arguments[1]:void 0,e.length)),r=String(t);return no?no.call(e,r,n):e.slice(n,n+r.length)===r}}),_r("String","startsWith");var uo,co=mt.f,ao="".endsWith,so=Math.min,fo=to("endsWith"),lo=!fo&&!!function(){var t=co(String.prototype,"endsWith");return t&&!t.writable}();function po(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function ho(t,e,n){return e&&po(t.prototype,e),n&&po(t,n),t}function vo(){return(vo=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t}).apply(this,arguments)}function yo(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}function go(t){return(go=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function mo(t,e){return(mo=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function wo(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}function bo(t,e,n){return(bo=wo()?Reflect.construct:function(t,e,n){var r=[null];r.push.apply(r,e);var o=new(Function.bind.apply(t,r));return n&&mo(o,n.prototype),o}).apply(null,arguments)}function So(t){var e="function"==typeof Map?new Map:void 0;return(So=function(t){if(null===t||-1===Function.toString.call(t).indexOf("[native code]"))return t;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,n)}function n(){return bo(t,arguments,go(this).constructor)}return n.prototype=Object.create(t.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),mo(n,t)})(t)}Vt({target:"String",proto:!0,forced:!lo&&!fo},{endsWith:function(t){var e=String(at(this));Zr(t);var n=arguments.length>1?arguments[1]:void 0,r=jt(e.length),o=void 0===n?r:so(jt(n),r),i=String(t);return ao?ao.call(e,i,o):e.slice(o-i.length,o)===i}}),_r("String","endsWith"),n(function(t){var e=function(t){var e=Object.prototype,n=e.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},o=r.iterator||"@@iterator",i=r.asyncIterator||"@@asyncIterator",u=r.toStringTag||"@@toStringTag";function c(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{c({},"")}catch(t){c=function(t,e,n){return t[e]=n}}function a(t,e,n,r){var o=Object.create((e&&e.prototype instanceof l?e:l).prototype),i=new j(r||[]);return o._invoke=function(t,e,n){var r="suspendedStart";return function(o,i){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw i;return{value:void 0,done:!0}}for(n.method=o,n.arg=i;;){var u=n.delegate;if(u){var c=b(u,n);if(c){if(c===f)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var a=s(t,e,n);if("normal"===a.type){if(r=n.done?"completed":"suspendedYield",a.arg===f)continue;return{value:a.arg,done:n.done}}"throw"===a.type&&(r="completed",n.method="throw",n.arg=a.arg)}}}(t,n,i),o}function s(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}t.wrap=a;var f={};function l(){}function p(){}function h(){}var v={};v[o]=function(){return this};var d=Object.getPrototypeOf,y=d&&d(d(x([])));y&&y!==e&&n.call(y,o)&&(v=y);var g=h.prototype=l.prototype=Object.create(v);function m(t){["next","throw","return"].forEach(function(e){c(t,e,function(t){return this._invoke(e,t)})})}function w(t,e){var r;this._invoke=function(o,i){function u(){return new e(function(r,u){!function r(o,i,u,c){var a=s(t[o],t,i);if("throw"!==a.type){var f=a.arg,l=f.value;return l&&"object"==typeof l&&n.call(l,"__await")?e.resolve(l.__await).then(function(t){r("next",t,u,c)},function(t){r("throw",t,u,c)}):e.resolve(l).then(function(t){f.value=t,u(f)},function(t){return r("throw",t,u,c)})}c(a.arg)}(o,i,r,u)})}return r=r?r.then(u,u):u()}}function b(t,e){var n=t.iterator[e.method];if(void 0===n){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,b(t,e),"throw"===e.method))return f;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return f}var r=s(n,t.iterator,e.arg);if("throw"===r.type)return e.method="throw",e.arg=r.arg,e.delegate=null,f;var o=r.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,f):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,f)}function S(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function E(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function j(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(S,this),this.reset(!0)}function x(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,i=function e(){for(;++r<t.length;)if(n.call(t,r))return e.value=t[r],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:O}}function O(){return{value:void 0,done:!0}}return p.prototype=g.constructor=h,h.constructor=p,p.displayName=c(h,u,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===p||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,h):(t.__proto__=h,c(t,u,"GeneratorFunction")),t.prototype=Object.create(g),t},t.awrap=function(t){return{__await:t}},m(w.prototype),w.prototype[i]=function(){return this},t.AsyncIterator=w,t.async=function(e,n,r,o,i){void 0===i&&(i=Promise);var u=new w(a(e,n,r,o),i);return t.isGeneratorFunction(n)?u:u.next().then(function(t){return t.done?t.value:u.next()})},m(g),c(g,u,"Generator"),g[o]=function(){return this},g.toString=function(){return"[object Generator]"},t.keys=function(t){var e=[];for(var n in t)e.push(n);return e.reverse(),function n(){for(;e.length;){var r=e.pop();if(r in t)return n.value=r,n.done=!1,n}return n.done=!0,n}},t.values=x,j.prototype={constructor:j,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(E),!t)for(var e in this)"t"===e.charAt(0)&&n.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function r(n,r){return u.type="throw",u.arg=t,e.next=n,r&&(e.method="next",e.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],u=i.completion;if("root"===i.tryLoc)return r("end");if(i.tryLoc<=this.prev){var c=n.call(i,"catchLoc"),a=n.call(i,"finallyLoc");if(c&&a){if(this.prev<i.catchLoc)return r(i.catchLoc,!0);if(this.prev<i.finallyLoc)return r(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return r(i.catchLoc,!0)}else{if(!a)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return r(i.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var u=i?i.completion:{};return u.type=t,u.arg=e,i?(this.method="next",this.next=i.finallyLoc,f):this.complete(u)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),f},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),E(n),f}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var o=r.arg;E(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:x(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=void 0),f}},t}(t.exports);try{regeneratorRuntime=e}catch(t){Function("r","regeneratorRuntime = r")(e)}}),function(t){t.LIVE="live",t.TEST="test"}(uo||(uo={}));var Eo=function(){function t(t,e){this.userAgentComponents=[],this.credentials=t,this.config=e}var e=t.prototype;return e.urlFor=function(t){return(this.apiRoot.endsWith("/")?this.apiRoot.slice(0,-1):this.apiRoot)+"/"+(t.startsWith("/")?t.slice(1):t)},e.addUserAgentComponent=function(t,e){this.userAgentComponents.push(e?t+"/"+e:t)},ho(t,[{key:"apiRoot",get:function(){return this.config.apiRoot[this.mode].trim()}},{key:"mode",get:function(){return this.config.mode},set:function(t){this.config.mode=t}},{key:"logger",get:function(){return this.config.logger}},{key:"userAgentString",get:function(){return this.userAgentComponents.reverse().join("; ")}}]),t}(),jo=function(){function t(t){this.response=t}return ho(t,[{key:"statusCode",get:function(){return this.response.status}},{key:"data",get:function(){return this.response.data}}]),t}(),xo=function(t){function e(e,n,r){var o;return(o=t.call(this)||this).message=e,o.request=n,o.response=r,o}return yo(e,t),e}(So(Error)),Oo=function(){function e(t,e){this.context=t,this.url=e,this.headers={"X-Alma-Agent":this.context.userAgentString,Accept:"application/json"},this.params={},this.body=null}var n=e.prototype;return n.setBody=function(t){return this.body=t,this},n.setQueryParams=function(t){return this.params=t,this},n.requestConfig=function(t){var e={url:this.url,headers:this.headers,params:this.params,method:t};return this.body&&(e.data=this.body),this.context.credentials.configureCredentials(e)},n.sendRequest=function(n){return t.request(this.requestConfig(n)).then(e.processResponse).catch(this.processErrorResponse)},n.get=function(){return this.body=null,this.sendRequest("get")},n.post=function(){return this.sendRequest("post")},n.put=function(){return this.sendRequest("put")},e.processResponse=function(t){return new jo(t)},n.processErrorResponse=function(t){var e,n="Unknown error";throw t.response?(e=new jo(t.response)).data&&(n=e.data.message||e.data.error):n=t.name+": "+t.message,new xo(n,this,e)},e}(),Ao=function(){function t(t){this.context=t}return t.prototype.request=function(t){return new Oo(this.context,this.context.urlFor(t))},ho(t,[{key:"logger",get:function(){return this.context.logger}}]),t}(),Lo=function(t){function e(){return t.apply(this,arguments)||this}return yo(e,t),ho(e,[{key:"isEligible",get:function(){return this.eligible}}]),e}(function(){function t(t){var e=this;this.data=t,Object.keys(t).forEach(function(n){return e[n]=t[n]})}return ho(t,[{key:"rawData",get:function(){return this.data}}]),t}()),To=function(t){function e(){return t.apply(this,arguments)||this}yo(e,t);var n=e.prototype;return n.eligibility=function(t){try{return Promise.resolve(this.request("/v1/payments/eligibility").setBody(t).post()).then(function(t){var e=t.statusCode>=500,n=t.data;return!e&&Array.isArray(n)?(n=n.sort(function(t,e){return t.installments_count-e.installments_count})).map(function(t){return new Lo(t)}):new Lo(!e&&n&&"object"==typeof n?n:{eligible:!1})})}catch(t){return Promise.reject(t)}},n.create=function(t){try{return Promise.resolve(this.request("/v1/payments").setBody(t).post()).then(function(t){return t.data})}catch(t){return Promise.reject(t)}},e}(Ao),Po=function(){function t(t){if(!t.trim())throw new Error("An API key is required to instantiate a new Client");this.apiKey=t}return t.prototype.configureCredentials=function(t){return vo({},t,{headers:vo({},t.headers,{Authorization:"Alma-Auth "+this.apiKey})})},t}(),_o=function(){function t(t){if(!t.trim())throw new Error("A merchant ID is required to instantiate a new Client");this.merchantId=t}return t.prototype.configureCredentials=function(t){return vo({},t,{headers:vo({},t.headers,{Authorization:"Alma-Merchant-Auth "+this.merchantId})})},t}(),ko=function(){function t(e,n){void 0===n&&(n={}),this.endpoints=new Map;var r=t.initConfig(e,n);this.context=new Eo(e,r),this.initUserAgent()}t.withApiKey=function(e,n){return void 0===n&&(n={}),new t(new Po(e),n)},t.withMerchantId=function(e,n){return void 0===n&&(n={}),new t(new _o(e),n)},t.initConfig=function(t,e){var n,r,o={apiRoot:(n={},n[uo.TEST]="https://api.sandbox.getalma.eu",n[uo.LIVE]="https://api.getalma.eu",n),mode:uo.LIVE,logger:console},i=e.apiRoot,u=e.mode;if("string"==typeof i)e.apiRoot=((r={})[uo.TEST]=i,r[uo.LIVE]=i,r);else if(i&&(!i[uo.TEST]||!i[uo.LIVE]))throw new Error("ClientOptions `apiRoot` must be a string or an object with ApiMode values as keys");if(u&&u!==uo.LIVE&&u!==uo.TEST)throw new Error("ClientOptions `mode` must be an ApiMode value");return!u&&t instanceof Po&&(e.mode=t.apiKey.indexOf("_live_",2)>0?uo.LIVE:uo.TEST),vo({},o,e)};var e=t.prototype;return e.initUserAgent=function(){this.addUserAgentComponent("JavaScript"),this.addUserAgentComponent("Alma for JS","1.1.1")},e.addUserAgentComponent=function(t,e){this.context.addUserAgentComponent(t,e)},e.endpoint=function(t){var e=this.endpoints.get(t);return e||(e=new t(this.context),this.endpoints.set(t,e)),e},ho(t,[{key:"payments",get:function(){return this.endpoint(To)}},{key:"mode",get:function(){return this.context.mode},set:function(t){this.context.mode=t}}]),t}();export{uo as ApiMode,ko as Client,Lo as Eligibility};
//# sourceMappingURL=alma-client.m.js.map
